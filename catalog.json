{
  "schema_version": 1,
  "entries": [
    {
      "id": "ubuntu-24.04",
      "name": "Ubuntu 24.04 LTS",
      "description": "Ubuntu Server netboot installer (autoinstall)",
      "version": "24.04",
      "arch": "amd64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp",
      "files": [
        { "name": "vmlinuz", "url": "https://releases.ubuntu.com/noble/netboot/amd64/linux" },
        { "name": "initrd.img", "url": "https://releases.ubuntu.com/noble/netboot/amd64/initrd" }
      ]
    },
    {
      "id": "debian-12",
      "name": "Debian 12 Bookworm",
      "description": "Debian netboot installer",
      "version": "12",
      "arch": "amd64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp",
      "files": [
        { "name": "vmlinuz", "url": "https://deb.debian.org/debian/dists/bookworm/main/installer-amd64/current/images/netboot/debian-installer/amd64/linux" },
        { "name": "initrd.img", "url": "https://deb.debian.org/debian/dists/bookworm/main/installer-amd64/current/images/netboot/debian-installer/amd64/initrd.gz" }
      ]
    },
    {
      "id": "debian-13",
      "name": "Debian 13 Trixie",
      "description": "Debian netboot installer with preseed template",
      "version": "13",
      "arch": "amd64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp",
      "os_family": "debian",
      "kernel_params": "auto=true priority=critical preseed/url={{.ConfigURL}} netcfg/choose_interface=auto netcfg/get_hostname={{.Hostname}} mirror/http/hostname=deb.debian.org mirror/http/directory=/debian ---",
      "config_template": "#_preseed_V1\n# Debian 13 Preseed - {{.Hostname}}\n# Served by duh\n\n### Early command - wipe existing partition tables/LVM on NVMe only\nd-i partman/early_command string \\\n    for disk in /dev/nvme*n1; do dd if=/dev/zero of=\"$disk\" bs=1M count=100 2>/dev/null || true; done; \\\n    sleep 2\n\n### Localization\nd-i debian-installer/locale string en_US.UTF-8\nd-i keyboard-configuration/xkb-keymap select us\n\n### Network configuration\nd-i netcfg/choose_interface select {{.Vars.interface}}\n\n# Static IP configuration\nd-i netcfg/disable_autoconfig boolean true\nd-i netcfg/get_ipaddress string {{.Vars.ip}}\nd-i netcfg/get_netmask string {{.Vars.netmask}}\nd-i netcfg/get_gateway string {{.Vars.gateway}}\nd-i netcfg/get_nameservers string {{.Vars.dns}}\nd-i netcfg/confirm_static boolean true\n\nd-i netcfg/get_hostname string {{.Hostname}}\nd-i netcfg/get_domain string {{.Vars.domain}}\n\n# Disable WEP key dialog\nd-i netcfg/wireless_wep string\n\n### Mirror settings\nd-i mirror/country string manual\nd-i mirror/http/hostname string deb.debian.org\nd-i mirror/http/directory string /debian\nd-i mirror/http/proxy string\n\n### Account setup\n# Skip root account (use sudo instead)\nd-i passwd/root-login boolean false\n\n# Create user account\nd-i passwd/user-fullname string {{.Vars.username}}\nd-i passwd/username string {{.Vars.username}}\nd-i passwd/user-password-crypted string {{.Vars.password_hash}}\n\n### Clock and time zone setup\nd-i clock-setup/utc boolean true\nd-i time/zone string {{.Vars.timezone}}\nd-i clock-setup/ntp boolean true\n\n### Partitioning\n# Use LVM on the first disk\nd-i partman-auto/method string lvm\nd-i partman-auto/disk string /dev/nvme0n1\nd-i partman-lvm/device_remove_lvm boolean true\nd-i partman-md/device_remove_md boolean true\nd-i partman-lvm/confirm boolean true\nd-i partman-lvm/confirm_nooverwrite boolean true\n\n# Use entire disk\nd-i partman-auto-lvm/guided_size string max\nd-i partman-auto/choose_recipe select atomic\n\n# Confirm partitioning\nd-i partman-partitioning/confirm_write_new_label boolean true\nd-i partman/choose_partition select finish\nd-i partman/confirm boolean true\nd-i partman/confirm_nooverwrite boolean true\n\n### Package selection\ntasksel tasksel/first multiselect standard, ssh-server\nd-i pkgsel/include string sudo curl wget vim git htop net-tools python3 ca-certificates gnupg open-iscsi lsscsi sg3-utils e2fsprogs xfsprogs efibootmgr\n\n# No popularity contest\npopularity-contest popularity-contest/participate boolean false\n\n# Automatic security updates\nd-i pkgsel/update-policy select unattended-upgrades\n\n### Boot loader installation\nd-i grub-installer/only_debian boolean true\nd-i grub-installer/with_other_os boolean true\nd-i grub-installer/bootdev string default\n# Do NOT modify EFI NVRAM - preserves PXE as first boot entry\nd-i grub-installer/update-nvram boolean false\n\n### Finishing up\nd-i finish-install/reboot_in_progress note\n\n### Late commands - run in installed system\nd-i preseed/late_command string \\\n    in-target mkdir -p /home/{{.Vars.username}}/.ssh; \\\n    in-target chmod 700 /home/{{.Vars.username}}/.ssh; \\\n    echo '{{.Vars.ssh_key}}' > /target/home/{{.Vars.username}}/.ssh/authorized_keys; \\\n    in-target chmod 600 /home/{{.Vars.username}}/.ssh/authorized_keys; \\\n    in-target chown -R {{.Vars.username}}:{{.Vars.username}} /home/{{.Vars.username}}/.ssh; \\\n    echo '{{.Vars.username}} ALL=(ALL) NOPASSWD:ALL' > /target/etc/sudoers.d/{{.Vars.username}}; \\\n    chmod 440 /target/etc/sudoers.d/{{.Vars.username}}; \\\n    echo '{{.Hostname}}' > /target/etc/hostname; \\\n    printf 'auto lo\\niface lo inet loopback\\n\\nauto {{.Vars.interface}}\\niface {{.Vars.interface}} inet static\\n    address {{.Vars.ip}}\\n    netmask {{.Vars.netmask}}\\n    gateway {{.Vars.gateway}}\\n    dns-nameservers {{.Vars.dns}}\\n' > /target/etc/network/interfaces; \\\n    echo '#!/bin/sh' > /target/tmp/fix-boot.sh; \\\n    echo 'PXE=$(efibootmgr | grep BootCurrent | sed \"s/BootCurrent: //\")' >> /target/tmp/fix-boot.sh; \\\n    echo 'efibootmgr -c -d /dev/nvme0n1 -p 1 -L debian -l \\\\EFI\\\\debian\\\\grubx64.efi' >> /target/tmp/fix-boot.sh; \\\n    echo 'ORDER=$(efibootmgr | grep BootOrder | sed \"s/BootOrder: //\")' >> /target/tmp/fix-boot.sh; \\\n    echo 'REST=$(echo \"$ORDER\" | sed \"s/$PXE,//;s/,$PXE//;s/^$PXE$//\" | sed \"s/^,//;s/,$//\" )' >> /target/tmp/fix-boot.sh; \\\n    echo '[ -n \"$PXE\" ] && [ -n \"$REST\" ] && efibootmgr -o \"$PXE,$REST\"' >> /target/tmp/fix-boot.sh; \\\n    echo '[ -n \"$PXE\" ] && [ -z \"$REST\" ] && efibootmgr -o \"$PXE\"' >> /target/tmp/fix-boot.sh; \\\n    echo 'efibootmgr -v > /root/efibootmgr-post-install.log 2>&1' >> /target/tmp/fix-boot.sh; \\\n    chmod +x /target/tmp/fix-boot.sh; \\\n    in-target /tmp/fix-boot.sh || true; \\\n    wget -qO /dev/null --post-data='' {{.CallbackURL}} || true; \\\n    echo 'Done'",
      "vars": [
        { "key": "interface", "label": "Network Interface", "type": "string", "default": "enp4s0", "description": "Primary network interface name" },
        { "key": "ip", "label": "IP Address", "type": "string", "default": "", "required": true, "description": "Static IP address (set per-system via system vars)" },
        { "key": "netmask", "label": "Netmask", "type": "string", "default": "255.255.255.0", "description": "Network mask" },
        { "key": "gateway", "label": "Gateway", "type": "string", "default": "", "required": true, "description": "Default gateway" },
        { "key": "dns", "label": "DNS Server", "type": "string", "default": "", "required": true, "description": "DNS nameserver" },
        { "key": "domain", "label": "Domain", "type": "string", "default": "homelab.local", "description": "Network domain name" },
        { "key": "username", "label": "Username", "type": "string", "default": "", "required": true, "description": "Primary user account name" },
        { "key": "password_hash", "label": "Password Hash", "type": "password", "default": "", "required": true, "description": "Encrypted password (mkpasswd -m sha-512)" },
        { "key": "ssh_key", "label": "SSH Public Key", "type": "text", "default": "", "description": "SSH public key for authorized_keys" },
        { "key": "timezone", "label": "Timezone", "type": "string", "default": "UTC", "description": "System timezone (e.g. America/Los_Angeles)" }
      ],
      "files": [
        { "name": "vmlinuz", "url": "https://deb.debian.org/debian/dists/trixie/main/installer-amd64/current/images/netboot/debian-installer/amd64/linux" },
        { "name": "initrd.img", "url": "https://deb.debian.org/debian/dists/trixie/main/installer-amd64/current/images/netboot/debian-installer/amd64/initrd.gz" }
      ]
    },
    {
      "id": "rocky-9",
      "name": "Rocky Linux 9",
      "description": "Rocky Linux 9 netboot installer",
      "version": "9",
      "arch": "amd64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp inst.repo=https://download.rockylinux.org/pub/rocky/9/BaseOS/x86_64/os/",
      "files": [
        { "name": "vmlinuz", "url": "https://download.rockylinux.org/pub/rocky/9/BaseOS/x86_64/os/images/pxeboot/vmlinuz" },
        { "name": "initrd.img", "url": "https://download.rockylinux.org/pub/rocky/9/BaseOS/x86_64/os/images/pxeboot/initrd.img" }
      ]
    },
    {
      "id": "alma-9",
      "name": "AlmaLinux 9",
      "description": "AlmaLinux 9 netboot installer",
      "version": "9",
      "arch": "amd64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp inst.repo=https://repo.almalinux.org/almalinux/9/BaseOS/x86_64/os/",
      "files": [
        { "name": "vmlinuz", "url": "https://repo.almalinux.org/almalinux/9/BaseOS/x86_64/os/images/pxeboot/vmlinuz" },
        { "name": "initrd.img", "url": "https://repo.almalinux.org/almalinux/9/BaseOS/x86_64/os/images/pxeboot/initrd.img" }
      ]
    },
    {
      "id": "fedora-42",
      "name": "Fedora 42 Server",
      "description": "Fedora Server netboot installer",
      "version": "42",
      "arch": "amd64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp inst.repo=https://download.fedoraproject.org/pub/fedora/linux/releases/42/Server/x86_64/os/",
      "files": [
        { "name": "vmlinuz", "url": "https://download.fedoraproject.org/pub/fedora/linux/releases/42/Server/x86_64/os/images/pxeboot/vmlinuz" },
        { "name": "initrd.img", "url": "https://download.fedoraproject.org/pub/fedora/linux/releases/42/Server/x86_64/os/images/pxeboot/initrd.img" }
      ]
    },
    {
      "id": "arch-latest",
      "name": "Arch Linux",
      "description": "Arch Linux netboot (latest)",
      "version": "latest",
      "arch": "amd64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp",
      "files": [
        { "name": "vmlinuz", "url": "https://geo.mirror.pkgbuild.com/iso/latest/arch/boot/x86_64/vmlinuz-linux" },
        { "name": "initrd.img", "url": "https://geo.mirror.pkgbuild.com/iso/latest/arch/boot/x86_64/initramfs-linux.img" }
      ]
    },
    {
      "id": "talos-1.9",
      "name": "Talos Linux 1.9",
      "description": "Kubernetes-native OS for bare metal",
      "version": "1.9",
      "arch": "amd64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp talos.platform=metal",
      "files": [
        { "name": "vmlinuz", "url": "https://github.com/siderolabs/talos/releases/download/v1.9.0/vmlinuz-amd64" },
        { "name": "initrd.img", "url": "https://github.com/siderolabs/talos/releases/download/v1.9.0/initramfs-amd64.xz" }
      ]
    },
    {
      "id": "flatcar-stable",
      "name": "Flatcar Container Linux",
      "description": "Container-optimized Linux for infrastructure",
      "version": "stable",
      "arch": "amd64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp flatcar.autologin",
      "files": [
        { "name": "vmlinuz", "url": "https://stable.release.flatcar-linux.net/amd64-usr/current/flatcar_production_pxe.vmlinuz" },
        { "name": "initrd.img", "url": "https://stable.release.flatcar-linux.net/amd64-usr/current/flatcar_production_pxe_image.cpio.gz" }
      ]
    },
    {
      "id": "opensuse-tumbleweed",
      "name": "openSUSE Tumbleweed",
      "description": "openSUSE Tumbleweed rolling release netboot installer",
      "version": "latest",
      "arch": "amd64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp install=https://download.opensuse.org/tumbleweed/repo/oss/",
      "files": [
        { "name": "vmlinuz", "url": "https://download.opensuse.org/tumbleweed/repo/oss/boot/x86_64/loader/linux" },
        { "name": "initrd.img", "url": "https://download.opensuse.org/tumbleweed/repo/oss/boot/x86_64/loader/initrd" }
      ]
    },
    {
      "id": "opensuse-leap-16.0",
      "name": "openSUSE Leap 16.0",
      "description": "openSUSE Leap 16.0 netboot installer",
      "version": "16.0",
      "arch": "amd64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp install=https://download.opensuse.org/distribution/leap/16.0/repo/oss/",
      "files": [
        { "name": "vmlinuz", "url": "https://download.opensuse.org/distribution/leap/16.0/repo/oss/boot/x86_64/loader/linux" },
        { "name": "initrd.img", "url": "https://download.opensuse.org/distribution/leap/16.0/repo/oss/boot/x86_64/loader/initrd" }
      ]
    },
    {
      "id": "alpine-latest",
      "name": "Alpine Linux",
      "description": "Alpine Linux netboot (latest stable)",
      "version": "latest",
      "arch": "amd64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp modules=loop,squashfs quiet nomodeset alpine_repo=https://dl-cdn.alpinelinux.org/alpine/latest-stable/main/ modloop=https://dl-cdn.alpinelinux.org/alpine/latest-stable/releases/x86_64/netboot/modloop-lts",
      "files": [
        { "name": "vmlinuz", "url": "https://dl-cdn.alpinelinux.org/alpine/latest-stable/releases/x86_64/netboot/vmlinuz-lts" },
        { "name": "initrd.img", "url": "https://dl-cdn.alpinelinux.org/alpine/latest-stable/releases/x86_64/netboot/initramfs-lts" }
      ]
    },
    {
      "id": "alpine-latest-arm64",
      "name": "Alpine Linux",
      "description": "Alpine Linux netboot (latest stable)",
      "version": "latest",
      "arch": "arm64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp modules=loop,squashfs quiet nomodeset alpine_repo=https://dl-cdn.alpinelinux.org/alpine/latest-stable/main/ modloop=https://dl-cdn.alpinelinux.org/alpine/latest-stable/releases/aarch64/netboot/modloop-lts",
      "files": [
        { "name": "vmlinuz", "url": "https://dl-cdn.alpinelinux.org/alpine/latest-stable/releases/aarch64/netboot/vmlinuz-lts" },
        { "name": "initrd.img", "url": "https://dl-cdn.alpinelinux.org/alpine/latest-stable/releases/aarch64/netboot/initramfs-lts" }
      ]
    },
    {
      "id": "centos-stream-9",
      "name": "CentOS Stream 9",
      "description": "CentOS Stream 9 netboot installer",
      "version": "9",
      "arch": "amd64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp inst.repo=https://mirror.stream.centos.org/9-stream/BaseOS/x86_64/os/",
      "files": [
        { "name": "vmlinuz", "url": "https://mirror.stream.centos.org/9-stream/BaseOS/x86_64/os/images/pxeboot/vmlinuz" },
        { "name": "initrd.img", "url": "https://mirror.stream.centos.org/9-stream/BaseOS/x86_64/os/images/pxeboot/initrd.img" }
      ]
    },
    {
      "id": "ubuntu-24.04-arm64",
      "name": "Ubuntu 24.04 LTS",
      "description": "Ubuntu Server netboot installer (autoinstall)",
      "version": "24.04",
      "arch": "arm64",
      "boot_type": "linux",
      "cmdline": "ip=dhcp",
      "files": [
        { "name": "vmlinuz", "url": "https://cdimage.ubuntu.com/releases/24.04.3/release/netboot/arm64/linux" },
        { "name": "initrd.img", "url": "https://cdimage.ubuntu.com/releases/24.04.3/release/netboot/arm64/initrd" }
      ]
    }
  ]
}
